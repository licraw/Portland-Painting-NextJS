import type { Metadata } from "next";
import localFont from "next/font/local";
import Script from "next/script";
import "./globals.css";
import Header from "./components/Header";
import PencilBanner from "./components/PencilBanner";
import Nav from "./components/Nav";
import Footer from "./components/Footer";
import UtmTracker from "./components/UtmTracker";
import GoogleCaptchaWrapper from "./api/verifyRecaptcha/GoogleCaptchaWrapper";
import { SpeedInsights } from "@vercel/speed-insights/next";
import { Analytics } from "@vercel/analytics/react";
import { GoogleAnalytics } from "@next/third-parties/google";

const geistSans = localFont({
  src: "./fonts/GeistVF.woff",
  variable: "--font-geist-sans",
  weight: "100 900",
});
const geistMono = localFont({
  src: "./fonts/GeistMonoVF.woff",
  variable: "--font-geist-mono",
  weight: "100 900",
});

const organizationJsonLd = {
  "@context": "https://schema.org",
  "@type": "HousePainter",
  "@id": "https://www.paintpdx.com/#organization",
  name: "Portland Painting & Restoration",
  description:
    "Portland Painting and Restoration is one of Portland and Vancouverâ€™s premier repair, light remodel, and finish contractors. Transform your space with expert painting and restoration services.",
  url: "https://www.paintpdx.com/",
  logo: "https://www.paintpdx.com/logo.png",
  image: "https://www.paintpdx.com/herobanner.webp",
  telephone: "+1-503-236-7003",
  address: {
    "@type": "PostalAddress",
    streetAddress: "918 SE Stephens St.",
    addressLocality: "Portland",
    addressRegion: "OR",
    postalCode: "97214",
    addressCountry: "US",
  },
  areaServed: [
    { "@type": "City", name: "Portland" },
    { "@type": "City", name: "Vancouver" },
  ],
  contactPoint: {
    "@type": "ContactPoint",
    telephone: "+1-503-236-7003",
    contactType: "Customer Service",
    areaServed: "US",
    availableLanguage: "English",
  },
  foundingDate: "2004",
  slogan: "Reviving Homes, Restoring Trust",
  makesOffer: [
    {
      "@type": "Offer",
      itemOffered: {
        "@type": "Service",
        name: "Interior Painting",
        serviceType: "Interior Painting",
      },
    },
    {
      "@type": "Offer",
      itemOffered: {
        "@type": "Service",
        name: "Exterior Painting",
        serviceType: "Exterior Painting",
      },
    },
    {
      "@type": "Offer",
      itemOffered: {
        "@type": "Service",
        name: "Carpentry",
        serviceType: "Carpentry",
      },
    },
    {
      "@type": "Offer",
      itemOffered: {
        "@type": "Service",
        name: "Restoration",
        serviceType: "Restoration",
      },
    },
  ],
};

export const metadata: Metadata = {
  title: "Create Next App yo",
  description: "Generated by create next app",
};

export default function RootLayout({
  children,
}: Readonly<{
  children: React.ReactNode;
}>) {
  return (
    <html lang="en">
      <head>
        <GoogleAnalytics gaId="AW-1016197559" />
        <Script
          id="portland-painting-ld-json"
          type="application/ld+json"
          async
        >
          {JSON.stringify(organizationJsonLd)}
        </Script>
      </head>
      <body
        className={`${geistSans.variable} ${geistMono.variable} antialiased`}
      >
        <GoogleCaptchaWrapper>
          <UtmTracker />
          <SpeedInsights />
          <Analytics />
          <div className="grid grid-rows-[auto_1fr_auto] min-h-screen">
            {/* Header */}
            <Header>
              <PencilBanner ctaAction="/estimate" />
              <Nav />
            </Header>

            {/* Main content */}
            <main>{children}</main>

            {/* Footer */}
            <Footer />
          </div>
        </GoogleCaptchaWrapper>
      </body>
    </html>
  );
}
